<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SxmAnimationManager.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jsxm-maven-plugin</a> &gt; <a href="index.html" class="el_package">org.jsxm.maven.plugin.jsxmtool.animation</a> &gt; <span class="el_source">SxmAnimationManager.java</span></div><h1>SxmAnimationManager.java</h1><pre class="source lang-java linenums">/**
 * JSXM Maven PLugin CONFIDENTIAL
 * 
 *  __________________
 * 
 * Unpublished Copyright Â© 2012-2013 Konstantinos Margaritis, 
 * All Rights Reserved.
 * 
 * NOTICE:  All information contained herein is, and remains the property of Konstantinos Margaritis . 
 *
 * The intellectual and technical concepts contained herein are proprietary to the owner
 * Konstantinos Margaritis and may be covered by U.S and Foreign Patents, patents in process, 
 * and are protected by trade secret or copyright law. Dissemination of this information or 
 * reproduction of this material is strictly forbidden unless prior written permission is
 * obtained from Konstantinos Margaritis. Access to the source code contained herein is hereby 
 * forbidden to anyone except the owner.Confidentiality and Non-disclosure agreements 
 * explicitly covering such access.
 *
 * The copyright notice above does not evidence any actual or intended publication 
 * or disclosure  of  this source code, which includes information that is confidential 
 * and/or proprietary, and is a trade secret, of  Konstantinos Margaritis. ANY REPRODUCTION, 
 * MODIFICATION, DISTRIBUTION, PUBLIC  PERFORMANCE, OR PUBLIC DISPLAY OF OR THROUGH USE  OF 
 * THIS  SOURCE CODE  WITHOUT  THE EXPRESS WRITTEN CONSENT OF Konstantinos Margaritis IS STRICTLY PROHIBITED, 
 * AND IN VIOLATION OF APPLICABLE LAWS AND INTERNATIONAL TREATIES.  THE RECEIPT OR POSSESSION OF  
 * THIS SOURCE CODE AND/OR RELATED INFORMATION DOES NOT CONVEY OR IMPLY ANY RIGHTS  
 * TO REPRODUCE, DISCLOSE OR DISTRIBUTE ITS CONTENTS, OR TO MANUFACTURE, USE, OR SELL 
 * ANYTHING THAT IT  MAY DESCRIBE, IN WHOLE OR IN PART.  
 * 
 */
package org.jsxm.maven.plugin.jsxmtool.animation;

import java.io.UnsupportedEncodingException;
import java.util.LinkedList;
import java.util.List;

import org.jsxm.maven.plugin.jsxmtool.animation.core.SxmAbstractAnimator;
import org.jsxm.maven.plugin.jsxmtool.animation.userinterface.console.SxmConsoleAnimator;
import org.jsxm.maven.plugin.jsxmtool.animation.userinterface.gui.SxmGuiAnimationManager;
import org.jsxm.maven.plugin.jsxmtool.animation.userinterface.gui.SxmGuiAnimator;
import org.jsxm.maven.plugin.jsxmtool.core.JSXM;
import org.jsxm.maven.plugin.jsxmtool.core.Specification;
import org.jsxm.maven.plugin.jsxmtool.utilities.SxmCompilationUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * @author Konstantinos Margaritis
 * 
 */
public class SxmAnimationManager {
    
<span class="pc" id="L52">    private final Logger logger = (Logger) LoggerFactory.getLogger(this.getClass());</span>
    
<span class="pc" id="L54">    private List&lt;Specification&gt; specificationList = new LinkedList&lt;Specification&gt;();</span>
    
<span class="pc" id="L56">    private List&lt;String&gt; animateList = new LinkedList&lt;String&gt;();</span>
    private boolean animateAll;
    private int delay;
    private boolean txtInput;
    
    /**
     * Instantiates a new sxm animation manager.
     *
     * @param animateList the animate list
     * @param animateAll the animate all
     */
<span class="fc" id="L67">    public SxmAnimationManager(List&lt;String&gt; animateList, boolean animateAll,boolean txtInput) {</span>
<span class="fc" id="L68">        this.animateList = animateList;</span>
<span class="fc" id="L69">        this.animateAll = animateAll;</span>
<span class="fc" id="L70">        this.txtInput=txtInput;</span>
<span class="fc" id="L71">    }</span>
    
    /**
     * Instantiates a new sxm animation manager with animation delay.
     *
     * @param animateList the animate list
     * @param animateAll the animate all
     * @param delay the delay
     */
<span class="nc" id="L80">    public SxmAnimationManager(List&lt;String&gt; animateList, boolean animateAll, int delay) {</span>
<span class="nc" id="L81">        this.animateList = animateList;</span>
<span class="nc" id="L82">        this.animateAll = animateAll;</span>
<span class="nc" id="L83">        this.delay=delay;</span>
<span class="nc" id="L84">    }</span>

    /**
     * Animate.
     *
     * @param animator the animator string is used in order to select 
     * the concrete animator that will be used
     */
    public void animate(AnimatorType animType) {
<span class="fc" id="L93">        SxmAbstractAnimator abstractAnimator= null;</span>
<span class="pc bpc" id="L94" title="1 of 2 branches missed.">        if (animType==AnimatorType.CONSOLE) {</span>
<span class="fc" id="L95">            abstractAnimator = new SxmConsoleAnimator();</span>
<span class="fc" id="L96">            abstractAnimator.setTxtInput(txtInput);</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">        } else if (animType==AnimatorType.GUI) {</span>
<span class="nc" id="L98">            abstractAnimator = new SxmGuiAnimator();</span>
        } 
<span class="pc bpc" id="L100" title="1 of 2 branches missed.">        if (!animateAll) {</span>
<span class="fc" id="L101">            logger.debug(&quot;&quot; + animateAll);</span>
<span class="fc" id="L102">            createAnimationList();</span>
<span class="fc" id="L103">            animate(abstractAnimator);</span>
        } else {
<span class="nc" id="L105">            specificationList = JSXM.getInstance().getSpecificationList();</span>
<span class="nc" id="L106">            animate(abstractAnimator);</span>
        }
        
<span class="fc" id="L109">    }</span>
    
    /**
     * Animate.
     *
     * @param abstractAnimator the SxmAbstractAnimator used for the animation
     */
    private void animate(SxmAbstractAnimator abstractAnimator) {
<span class="fc" id="L117">        logger.debug(&quot;&quot; + animateAll);</span>
<span class="pc bpc" id="L118" title="1 of 2 branches missed.">        if (abstractAnimator instanceof SxmGuiAnimator) {</span>
<span class="nc" id="L119">            SxmGuiAnimationManager sxmGManager = new SxmGuiAnimationManager();</span>
<span class="nc" id="L120">            sxmGManager.animate(specificationList,delay);</span>
<span class="nc" id="L121">            logger.debug(&quot;gui animating&quot;);</span>
        }
<span class="fc bfc" id="L123" title="All 2 branches covered.">        for (int j = 0; j &lt; specificationList.size(); j++) {</span>
<span class="fc" id="L124">            logger.debug(&quot;Animating all specifications.&quot;);</span>
            try {
<span class="pc bpc" id="L126" title="1 of 2 branches missed.">                if(abstractAnimator instanceof SxmConsoleAnimator){</span>
<span class="fc" id="L127">                    Specification specForAnimation = specificationList.get(j);</span>
<span class="fc" id="L128">                    abstractAnimator.interactiveAnimation(specForAnimation.getClassName(), specForAnimation.getAnimationDirectory(),</span>
                            specForAnimation.getSpecificationDirectory());
<span class="fc" id="L130">                    logger.debug(&quot;console animating&quot;);   </span>
                }
<span class="nc" id="L132">            } catch (final UnsupportedEncodingException e) {</span>
<span class="nc" id="L133">                logger.error(&quot;UnsupportedEncodingException&quot;, e);</span>
<span class="fc" id="L134">            }</span>
        }
        
<span class="fc" id="L137">    }</span>
    
    /**
     * Creates the animation list.
     */
    private void createAnimationList() {
<span class="fc bfc" id="L143" title="All 2 branches covered.">        for (int i = 0; i &lt; animateList.size(); i++) {</span>
<span class="fc bfc" id="L144" title="All 2 branches covered.">            for (int j = 0; j &lt; JSXM.getInstance().getSpecificationList().size(); j++) {</span>
<span class="fc" id="L145">                logger.debug(animateList.get(i));</span>
<span class="fc" id="L146">                logger.debug(SxmCompilationUtils.extractSourceClass(JSXM.getInstance().getSpecificationList().get(j)</span>
                        .getName(), JSXM.SPECIFICATION_EXTENSION_LENGTH));
<span class="fc bfc" id="L148" title="All 2 branches covered.">                if (animateList.get(i).equals(</span>
                        SxmCompilationUtils.extractSourceClass(JSXM.getInstance().getSpecificationList().get(j)
                                .getName(), JSXM.SPECIFICATION_EXTENSION_LENGTH))) {
<span class="fc" id="L151">                    specificationList.add(JSXM.getInstance().getSpecificationList().get(j));</span>
<span class="fc" id="L152">                    logger.debug(&quot;Match found : Animating...&quot;);</span>
                }
            }
        }
<span class="fc" id="L156">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.3.201306030806</span></div></body></html>